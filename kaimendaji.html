<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>开门大吉 - 随机歌词抽取器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @font-face {
            font-family: 'Cyberpunk';
            src: local('Courier New'), local('Monaco'), local('Consolas'), monospace;
        }
        
        body {
            font-family: 'Cyberpunk', monospace;
            background: #0d0e14;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(5, 255, 161, 0.05), transparent 70%),
                        radial-gradient(circle at 20% 80%, rgba(212, 93, 247, 0.05), transparent 70%);
            pointer-events: none;
            z-index: 0;
        }
        
        .container {
            background: rgba(13, 14, 20, 0.9);
            border: 1px solid rgba(5, 255, 161, 0.3);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(5, 255, 161, 0.2),
                        0 0 60px rgba(212, 93, 247, 0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #05ffa1;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(5, 255, 161, 0.7);
            position: relative;
            animation: glitch 2s infinite alternate;
        }
        
        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-1px, 1px); }
            40% { transform: translate(-1px, -1px); }
            60% { transform: translate(1px, 1px); }
            80% { transform: translate(1px, -1px); }
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            border: 1px solid #05ffa1;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cyberpunk', monospace;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary {
            background: rgba(5, 255, 161, 0.1);
            color: #05ffa1;
        }
        
        .btn-primary:hover {
            background: rgba(5, 255, 161, 0.2);
            box-shadow: 0 0 20px rgba(5, 255, 161, 0.5);
            transform: translateY(-2px);
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(5, 255, 161, 0.3),
                transparent
            );
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        
        .btn-secondary {
            background: rgba(212, 93, 247, 0.1);
            color: #d45df7;
            border-color: #d45df7;
        }
        
        .btn-secondary:hover {
            background: rgba(212, 93, 247, 0.2);
            box-shadow: 0 0 20px rgba(212, 93, 247, 0.5);
            transform: translateY(-2px);
        }
        
        .result-section {
            background: rgba(13, 14, 20, 0.8);
            border: 1px solid rgba(212, 93, 247, 0.3);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .result-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(5, 255, 161, 0.05),
                transparent
            );
            pointer-events: none;
        }
        
        .image-container {
            width: 400px;
            height: 300px;
            margin: 0 auto 20px;
            border-radius: 8px;
            border: 2px solid #05ffa1;
            box-shadow: 0 0 20px rgba(5, 255, 161, 0.5);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(13, 14, 20, 0.8);
        }
        
        .result-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: all 0.5s ease;
        }
        
        .lyric-info {
            margin-bottom: 15px;
            color: #d45df7;
            font-size: 14px;
            text-shadow: 0 0 5px rgba(212, 93, 247, 0.5);
        }
        
        .lyric {
            font-size: 20px;
            font-weight: 500;
            color: #05ffa1;
            margin-bottom: 20px;
            line-height: 1.5;
            text-shadow: 0 0 10px rgba(5, 255, 161, 0.5);
            transition: all 0.5s ease;
        }
        
        .caption {
            font-size: 16px;
            color: #ffffff;
            font-style: italic;
            margin-bottom: 20px;
            transition: all 0.5s ease;
        }
        
        .empty-state {
            color: #666;
            font-style: italic;
        }
        
        .copy-success {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(5, 255, 161, 0.9);
            color: #0d0e14;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 0 15px rgba(5, 255, 161, 0.5);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .copy-success.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .result-image {
                max-width: 200px;
                max-height: 150px;
            }
            
            .lyric {
                font-size: 18px;
            }
        }
        
        /* 动画效果 */
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>开门大吉</h1>
        
        <div class="controls">
            <button class="btn-primary" onclick="extractLyric()">随机抽取</button>
            <button class="btn-secondary" onclick="copyContent()">复制内容</button>
        </div>
        
        <div class="result-section" id="result">
            <div class="empty-state">点击上方按钮开始抽取歌词</div>
        </div>
    </div>
    
    <div class="copy-success" id="copySuccess">已复制到剪贴板！</div>
    
    <!-- 音效元素 -->
    <audio id="extractSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==" type="audio/wav">
    </audio>
    
    <script>
        // ==================== 预设歌词库 ====================
        // 格式：{lyric: 歌词, artist: 歌手, song: 歌名, type: 类型}
        const presetLyrics = [
            {
                lyric: "外面的世界阳光明媚，但愿能溶解心房以内",
                artist: "门尼",
                song: "《哀人》",
                type: "healing"
            },
            {
                lyric: "你的名字上了膛，念一次中一枪",
                artist: "门尼",
                song: "《念念》",
                type: "heartbeat"
            },
            {
                lyric: "凭什么关上一扇门，还要再开扇窗，难道要我偷偷地望",
                artist: "门尼",
                song: "《看不见的人》",
                type: "heartbeat"
            },
            {
                lyric: "好想撕开所有过往大闹一场，可我站在什么立场",
                artist: "门尼",
                song: "《抑人》",
                type: "regret"
            },
            {
                lyric: "如春般的身体，莫愁哭泣流进骨缝里",
                artist: "门尼",
                song: "《如春》",
                type: "healing"
            },
            {
                lyric: "还能笑还能扛得住，迷了路还有新退路",
                artist: "门尼",
                song: "《哀人》",
                type: "healing"
            },
            {
                lyric: "你可以不用坚强，不用去较量，不用变样",
                artist: "门尼",
                song: "《给小朋友的歌》",
                type: "healing"
            },
            {
                lyric: "请好好躲在回忆角落，偶尔挑拨我",
                artist: "门尼",
                song: "《乱七八糟》",
                type: "regret"
            },
            {
                lyric: "咖啡冷掉我去换杯豆浆，心儿冷掉夏日不抵秋凉",
                artist: "门尼",
                song: "《抑人》",
                type: "regret"
            },
            {
                lyric: "地铁里的蝴蝶望不穿远方旷野的天，何必还在纠结与曾作茧的自己和解",
                artist: "门尼",
                song: "《如春》",
                type: "healing"
            }
        ];
        
        // ==================== 预设图片库 ====================
        // 相对路径，图片需与HTML文件放在同一目录
        // 请将以下图片文件放在与HTML文件同一目录中：
        // a.jpg, b.jpg, c.jpg, d.jpg, e.jpg, f.jpg, g.jpg, h.jpg, i.jpg, j.jpg, k.jpg
        const presetImages = [
            "a.jpg",
            "b.jpg",
            "c.jpg",
            "d.jpg",
            "e.jpg",
            "f.jpg",
            "g.jpg",
            "h.jpg",
            "i.jpg",
            "j.jpg",
            "k.jpg"
        ];
        
        // ==================== 文案库 ====================
        const captions = {
            healing: [
                "阳光总在风雨后，但风雨本身也是生命的一部分",
                "有时候，学会与自己和解，比强行快乐更重要",
                "生活的意义，在于经历本身，无论好坏",
                "每个人都在黑暗中摸索，你不是一个人",
                "真正的坚强，是看清生活的真相后依然热爱它"
            ],
            regret: [
                "有些遗憾，是我们为曾经的选择付出的代价",
                "人生没有如果，只有后果和结果",
                "那些未完成的故事，才是最让人难忘的",
                "有时候，错过不是因为不够好，只是因为时机不对",
                "遗憾是生命的留白，让我们更懂得珍惜现在"
            ],
            heartbeat: [
                "心动是一瞬间的火花，却能照亮整个生命",
                "爱情不是寻找完美的人，而是学会用完美的眼光欣赏不完美的人",
                "有时候，一句话、一个眼神，就足以改变一生",
                "真正的心动，不是热烈的激情，而是长久的陪伴",
                "爱情是一场修行，让我们学会付出，也学会接受"
            ]
        };
        
        // 存储当前抽取的内容
        let currentContent = {
            lyric: '',
            artist: '',
            song: '',
            caption: ''
        };
        
        // 随机算法优化：确保不重复抽取
        let remainingLyrics = [...presetLyrics];
        let remainingImages = [...presetImages];
        
        function resetArrays() {
            remainingLyrics = [...presetLyrics];
            remainingImages = [...presetImages];
        }
        
        function extractLyric() {
            // 播放抽取音效
            playExtractSound();
            
            // 检查是否需要重置数组
            if (remainingLyrics.length === 0) {
                resetArrays();
            }
            
            // 随机抽取一句歌词（不重复）
            const randomIndex = Math.floor(Math.random() * remainingLyrics.length);
            const selectedLyric = remainingLyrics[randomIndex];
            remainingLyrics.splice(randomIndex, 1); // 从剩余列表中移除
            
            // 检查图片数组是否需要重置
            if (remainingImages.length === 0) {
                remainingImages = [...presetImages];
            }
            
            // 随机选择一张图片（不重复）
            const randomImageIndex = Math.floor(Math.random() * remainingImages.length);
            const selectedImage = remainingImages[randomImageIndex];
            remainingImages.splice(randomImageIndex, 1); // 从剩余列表中移除
            
            // 根据歌词类型匹配文案
            const captionList = captions[selectedLyric.type] || captions.healing;
            const randomCaption = captionList[Math.floor(Math.random() * captionList.length)];
            
            // 存储当前内容
            currentContent = {
                lyric: selectedLyric.lyric,
                artist: selectedLyric.artist,
                song: selectedLyric.song,
                caption: randomCaption
            };
            
            // 显示结果
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <div class="image-container">
                    <img src="${selectedImage}" class="result-image fade-in" alt="赛博朋克风格图片">
                </div>
                <div class="lyric-info fade-in">${selectedLyric.artist} - ${selectedLyric.song}</div>
                <div class="lyric fade-in">${selectedLyric.lyric}</div>
                <div class="caption fade-in">${randomCaption}</div>
            `;
        }
        
        function playExtractSound() {
            const audio = document.getElementById('extractSound');
            if (audio) {
                try {
                    // 尝试播放音效
                    audio.currentTime = 0;
                    audio.play().catch(e => {
                        // 播放失败不影响功能
                        console.log('音效播放失败:', e);
                    });
                } catch (e) {
                    // 异常不影响功能
                    console.log('音效播放异常:', e);
                }
            }
        }
        
        function copyContent() {
            if (!currentContent.lyric) {
                alert('请先抽取歌词！');
                return;
            }
            
            const contentToCopy = `${currentContent.lyric}\n${currentContent.artist} - ${currentContent.song}\n${currentContent.caption}`;
            
            navigator.clipboard.writeText(contentToCopy).then(() => {
                // 显示复制成功提示
                const copySuccess = document.getElementById('copySuccess');
                copySuccess.classList.add('show');
                
                setTimeout(() => {
                    copySuccess.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动复制');
            });
        }
    </script>
</body>
</html>